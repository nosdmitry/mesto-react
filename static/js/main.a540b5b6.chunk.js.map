{"version":3,"sources":["images/logo.svg","components/Header.js","contexts/CurrentUserContext.js","components/Card.js","components/Loader.js","components/Main.js","components/Footer.js","components/PopupWithForm.js","components/EditProfilePopup.js","components/EditAvatarPopup.js","components/AddPlacePopup.js","components/ImagePopup.js","components/ConfirmationPopup.js","utils/api.js","components/App.js","reportWebVitals.js","index.js"],"names":["Header","className","href","target","src","logo","alt","CurrentUserContext","React","createContext","Card","card","openImage","onCardLike","onDeleteCardClick","currentUser","useContext","isOwner","_id","owner","cardLikeButtonClassName","likes","some","i","onClick","type","aria-label","link","name","length","Loader","Main","props","onEditAvatar","style","backgroundImage","avatar","onEditProfile","about","onAddPlace","loadingSpinner","cards","map","onCardClick","Footer","PopupWithForm","isOpen","onClose","title","onSubmit","noValidate","children","submitName","EditProfilePopup","onUpdateUser","useState","setName","description","setDescription","useEffect","e","preventDefault","id","minLength","maxLength","placeholder","value","onChange","required","EditAvatarPopup","onUpdateAvatar","avatarRef","useRef","current","reset","ref","AddPlacePopup","cardName","setCardName","cardLink","setCardLink","ImagePopup","ConfirmationPopup","onDeleteCard","api","options","this","_url","url","_headers","headers","_body","body","res","message","ok","json","Promise","reject","status","fetch","then","_onError","data","method","authorization","JSON","stringify","cardId","isLiked","console","log","fetchMethod","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpened","setIsEditAvatarPopupOpen","isDeleteCardPopupOpened","setIsDeleteCardPopupOpened","selectedCard","setSelectedCard","setCards","setLoadingSpinner","setCurrentUser","closeAllPopups","getUserInfo","catch","err","getAllCards","Provider","handleCardLikeStatus","newCard","state","c","userData","editUserInfo","avatarLink","changeAvatar","addNewCard","deleteCard","filter","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","querySelector"],"mappings":"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","file":"static/js/main.a540b5b6.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/logo.03b78ada.svg\";","import logo from '../images/logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n      <a href=\"./index.html\" className=\"header__logo-link\" target=\"_self\">\n        <img src={logo} alt=\"Логотип\" className=\"header__logo\" />\n      </a>\n    </header>\n  );\n}\n\nexport default Header;","import React from 'react';\n\nexport const CurrentUserContext = React.createContext();\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction Card({ card, openImage, onCardLike, onDeleteCardClick }) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  function openDeletePopup() {\n    onDeleteCardClick(card);\n  }\n\n  function handleCardLike() {\n    onCardLike(card);\n  }\n  \n  function handlePopup() {\n    openImage(card);\n  }\n\n  const isOwner = currentUser._id === card.owner._id;\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n  const cardLikeButtonClassName = !isLiked ? 'galery__heart' : 'galery__heart galery__heart_active';\n\n  return (\n    <article className=\"galery__card\">\n      <button \n        onClick={ openDeletePopup }\n        type=\"button\" \n        className={`galery__delete-card-button galery__delete-card-button${\n          isOwner ? '' : '_visible_hidden'\n        }`} \n        aria-label=\"Delete_card\"\n      ></button>\n      <img onClick={ handlePopup } src={ card.link } alt={ card.name } className=\"galery__img\" /> \n      <h2 className=\"galery__text\">{ card.name }</h2>\n      <div className=\"galery__likes-wrap\">\n        <button \n          onClick={ handleCardLike }\n          type=\"button\" \n          aria-label=\"Like\" \n          className={ cardLikeButtonClassName }\n        ></button>\n        <div className=\"galery__heart galery__heart_loading galery__heart_visible_hidden\"></div>\n        <span className=\"galery__likes-counter\">{ card.likes.length }</span>\n      </div> \n    </article>\n  );\n}\n\nexport default Card;","function Loader() {\n  return (\n    <div className=\"galery__card galery__card_loading\"></div>\n  );\n}\n\nexport default Loader;\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport Card from './Card';\nimport Loader from './Loader';\n\nfunction Main(props) {\n\n  const currentUser = React.useContext(CurrentUserContext);\n\n  return (\n    <main>\n      <section className=\"profile\">\n        <button onClick={props.onEditAvatar}\n          className=\"profile__image profile__image\"\n          style={{ backgroundImage: `url(${ currentUser.avatar })` }}\n          aria-label=\"Аватар\">\n        </button>\n        <div className=\"profile__text-wrap\">\n          <div className=\"profile__title-wrap\">\n            <h1 className=\"profile__title\" aria-label=\"Имя\">{ currentUser.name }</h1>\n            <button\n              onClick={ props.onEditProfile }\n              type=\"button\"\n              aria-label=\"Edit_profile\"\n              className=\"profile__edit\">\n            </button>\n          </div>\n          <p className=\"profile__subtitle\" aria-label=\"Описание\">{ currentUser.about }</p>\n        </div>\n        <button\n          onClick={ props.onAddPlace }\n          type=\"button\"\n          aria-label=\"Add_img\"\n          className=\"profile__add-card-button\">\n        </button>\n      </section>\n\n      <section className=\"galery galery_margins\" aria-label=\"Галерея\">\n        <div className=\"galery__cards\">\n          {\n            props.loadingSpinner \n              ? (<Loader />)\n              : props.cards.map((card) => {\n                return (\n                    <Card \n                      key={ card._id }\n                      card={ card }\n                      openImage={ props.onCardClick }\n                      onCardLike={ props.onCardLike }\n                      onDeleteCardClick={ props.onDeleteCardClick }\n                    />\n                );\n              })\n          }\n        </div>\n      </section>\n    </main>\n  );\n}\n\nexport default Main;\n","function Footer() {\n  return (\n    <footer className=\"footer\">\n      <p className=\"footer__copyright\">&copy; 2020 Mesto Russia</p>\n    </footer>\n  );\n}\n\nexport default Footer;","function PopupWithForm(props) {\n\n  return (\n    <div className={`popup popup_type_${ props.name } ${ props.isOpen ? 'popup_opened' : '' }`} >\n      <div className=\"popup__container\">\n      <button onClick={ props.onClose } type=\"button\" aria-label=\"Close_popup\" \n        className=\"popup__exit-button exit exit_button_profile-popup\">\n      </button>\n      <h3 className=\"popup__form-title\">{props.title}</h3>\n      <form \n        onSubmit={ props.onSubmit }\n        name={`popup_form_${props.name}`} \n        className=\"popup__form popup__form_edit_peronal-data\" \n        noValidate\n      >\n        { props.children }\n        <button type=\"submit\" name=\"submit-edit-profile\" className=\"popup__submit-button\">{props.submitName}</button>\n      </form>\n      </div>\n    </div>\n  );\n}\n\nexport default PopupWithForm;\n","import React from 'react';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditProfilePopup({ isOpen, onClose, onUpdateUser }) {\n  \n  const currentUser = React.useContext(CurrentUserContext);\n  const [name, setName] = React.useState('');\n  const [description, setDescription] = React.useState('');\n\n  function handleName(e) {\n    setName(e.target.value);\n  }\n\n  function handleDescription(e) {\n    setDescription(e.target.value);\n  }\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateUser({\n      name: name,\n      about: description\n    });\n  }\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setDescription(currentUser.about);\n  }, [currentUser]);\n\n  return (\n    <PopupWithForm \n      name=\"profile-edit-form\" \n      title=\"Редактировать профиль\" \n      submitName=\"Сохранить\"\n      isOpen={ isOpen }\n      onClose={ onClose }\n      onSubmit={ handleSubmit }\n    >\n      <label className=\"popup__form-field\">\n        <input \n          id=\"user-name\" \n          type=\"text\" \n          name=\"popup_name\" \n          minLength=\"2\" \n          maxLength=\"40\" \n          placeholder=\"Имя\"\n          className=\"popup__input popup__input_type_name\" \n          value={ name  }\n          onChange={ handleName }\n          required \n        />\n        <span className=\"user-name-error popup__error\"></span>\n      </label>\n      <label className=\"popup__form-field\">\n        <input \n          id=\"user-description\" \n          type=\"text\" \n          name=\"popup_description\" \n          minLength=\"2\" \n          maxLength=\"200\"\n          placeholder=\"Род деятельности\" \n          className=\"popup__input popup__input_type_description\" \n          value={ description }\n          onChange={ handleDescription }\n          required \n        />\n        <span className=\"user-description-error popup__error\"></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditProfilePopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction EditAvatarPopup({ isOpen, onClose, onUpdateAvatar }) {\n\n  let avatarRef = React.useRef('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n    onUpdateAvatar({\n      avatar: avatarRef.current.value\n    });\n    e.target.reset();\n  }\n\n  return (\n    <PopupWithForm \n      name=\"change-avatar\" \n      title=\"Обновить аватар\" \n      submitName=\"Сохранить\"\n      isOpen={ isOpen }\n      onClose={ onClose }\n      onSubmit={ handleSubmit }\n    >\n      <label className=\"popup__form-field\">\n        <input \n          id=\"user-avatar\" \n          type=\"url\" \n          name=\"popup_description\" \n          placeholder=\"Ссылка на картинку\"\n          className=\"popup__input popup__input_type_image-link\" \n          ref={ avatarRef }\n          required \n        />\n        <span className=\"user-avatar-error popup__error\"></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default EditAvatarPopup;\n","import React from 'react';\nimport PopupWithForm from './PopupWithForm';\n\nfunction AddPlacePopup({ isOpen, onClose, onAddPlace }) {\n\n  const [cardName, setCardName] = React.useState('');\n  const [cardLink, setCardLink] = React.useState('');\n\n  function handleCardName(e) {\n    setCardName(e.target.value);\n  }\n\n  function handleCardLink(e) {\n    setCardLink(e.target.value);\n  }\n\n  function handleSubmitClick(e) {\n    e.preventDefault();\n    onAddPlace({\n      name: cardName,\n      link: cardLink\n    });\n    setCardName('');\n    setCardLink('');\n  }\n\n  return (\n    <PopupWithForm \n      name=\"cards-add-form\" \n      title=\"Новое место\" \n      submitName=\"Создать\"\n      isOpen={ isOpen }\n      onClose={ onClose }\n      onSubmit={ handleSubmitClick }\n    >\n      <label className=\"popup__form-field\">\n        <input \n          id=\"place-name\" \n          type=\"text\" \n          name=\"popup_name\" \n          minLength=\"2\" \n          maxLength=\"30\" \n          placeholder=\"Название\"\n          className=\"popup__input popup__input_type_card-name\" \n          onChange={ handleCardName }\n          value={ cardName || '' }\n          required \n        />\n        <span className=\"place-name-error popup__error\"></span>\n      </label>\n      <label className=\"popup__form-field\">\n        <input \n          id=\"place-url\" \n          type=\"url\" \n          name=\"popup_description\" \n          placeholder=\"Ссылка на картинку\"\n          className=\"popup__input popup__input_type_image-link\" \n          onChange={ handleCardLink }\n          value={ cardLink || '' }\n          required \n        />\n        <span className=\"place-url-error popup__error\"></span>\n      </label>\n    </PopupWithForm>\n  );\n}\n\nexport default AddPlacePopup;\n","function ImagePopup(props) {\n    return(\n      <div className={`popup galery galery_popup ${props.card ? 'popup_opened' : ''}`}>\n        <figure className=\"galery__popup-image-container\">\n          <button onClick={ props.onClose } type=\"button\" aria-label=\"Close_popup\" className=\"popup__exit-button galery__popup-exit\"></button>\n          <img src={ props.card.link } alt={ props.card.name } className=\"galery__fulsize-img\" />\n          <figcaption className=\"galery__popup-text\">{ props.card.name }</figcaption>\n        </figure>\n      </div>\n    );\n}\n\nexport default ImagePopup;\n","import PopupWithForm from './PopupWithForm';\n\nfunction ConfirmationPopup({ isOpen, onClose, onDeleteCard }) {\n\n  function deleteCard(e) {\n    e.preventDefault();\n    onDeleteCard();\n  }\n\n  return (\n    <PopupWithForm \n      name=\"card-delete\" \n      title=\"Вы уверены?\" \n      submitName=\"Удалить\" \n      isOpen={ isOpen }\n      onClose={ onClose }\n      onSubmit={ deleteCard }\n    />\n  );\n}\n\nexport default ConfirmationPopup;\n","export class Api {\n  constructor(options) {\n    this._url = options.url;\n    this._headers = options.headers;\n    this._body = options.body;\n  }\n\n  _onError(res, message) {\n    if(res.ok) {\n      return res.json();\n    }\n    return Promise.reject(`${message}: ` + res.status);\n  }\n\n  getUserInfo() {\n    return fetch(`${this._url}users/me`, {\n      headers: this._headers\n    })\n    .then(res => this._onError(res, 'Ошибка при обращении к серверу'))\n  }\n\n  editUserInfo(data) {\n    return fetch(`${this._url}users/me`, {\n      method: 'PATCH',\n      headers: {\n        authorization: this._headers.authorization,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n      })\n      .then(res => this._onError(res, 'Ошибка при редактировании данных пользователя'))\n  }\n\n  getAllCards() {\n    return fetch(`${this._url}cards/`, {\n        headers: this._headers\n      })\n      .then(res => this._onError(res, 'Ошибка при получении данных карточек'))\n  }\n\n  addNewCard(data) {\n    return fetch(`${this._url}cards/`, {\n      method: 'POST',\n      headers: {\n        authorization: this._headers.authorization,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    })\n    .then(res => this._onError(res, 'Ошибка при добавлении новой карточки'))\n  }\n\n  deleteCard(cardId) {\n    return fetch(`${this._url}cards/${cardId}`, {\n      method: 'DELETE',\n      headers: this._headers\n    })\n    .then(res => this._onError(res, 'Ошибка при удалении картчоки'))\n  }\n\n  // addLike(cardId) {\n  //   return fetch(`${this._url}cards/likes/${cardId}`, {\n  //     method: 'PUT',\n  //     headers: this._headers\n  //   })\n  //   .then(res => this._onError(res, 'Ошибка при обработке лайка'))\n  // }\n\n  // removeLike(cardId) {\n  //   return fetch(`${this._url}cards/likes/${cardId}`, {\n  //     method: 'DELETE',\n  //     headers: this._headers\n  //   })\n  //   .then(res => this._onError(res, 'Ошибка при обработке лайка'))\n  // }\n\n  handleCardLikeStatus(cardId, isLiked) {\n    console.log('hello from API!');\n    const fetchMethod = !isLiked ? 'DELETE' : 'PUT';\n    return fetch(`${this._url}cards/likes/${cardId}`, {\n      method: fetchMethod,\n      headers: this._headers\n    })\n    .then(res => this._onError(res, 'Ошибка при обработке лайка'))\n  }\n\n  changeAvatar(data) {\n    return fetch('https://mesto.nomoreparties.co/v1/cohort-20/users/me/avatar', {\n      method: 'PATCH',\n      headers: {\n        authorization: this._headers.authorization,\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(data)\n    })\n    .then(res => this._onError(res, 'Не удалось изменить аватарку'))\n  }\n}\n\nconst api = new Api({\n  url: 'https://mesto.nomoreparties.co/v1/cohort-20/',\n  headers: {\n    authorization: '036c4f02-47a4-4c62-a975-bbce507f165f'\n  }\n})\n\nexport default api;","import '../index.css';\nimport React from 'react';\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\nimport EditProfilePopup from './EditProfilePopup';\nimport EditAvatarPopup from './EditAvatarPopup';\nimport AddPlacePopup from './AddPlacePopup';\nimport ImagePopup from './ImagePopup';\nimport ConfirmationPopup from './ConfirmationPopup';\nimport api from '../utils/api';\nimport { CurrentUserContext } from '../contexts/CurrentUserContext';\n\nfunction App() {\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpened, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isDeleteCardPopupOpened, setIsDeleteCardPopupOpened] = React.useState(false);\n  const [selectedCard, setSelectedCard] = React.useState(false);\n  const [cards, setCards] = React.useState([]);\n  const [loadingSpinner, setLoadingSpinner] = React.useState(true);\n\n  const [currentUser, setCurrentUser] = React.useState({\n    avatar: './static/media/avatar-loader.7741db8b.gif',\n    name: 'Загрузка',\n    about: 'Загрузка'\n  });\n\n  React.useEffect(() => {\n    api.getUserInfo()\n      .then(data => setCurrentUser(data))\n      .catch(err => console.log('#####Error: user data; ', err));\n  }, []);\n\n  React.useEffect(() => {\n    api.getAllCards()\n      .then(data => {\n        setCards(data);\n        setLoadingSpinner(false);\n      })\n      .catch(err => console.log('Cards data error: ', err));\n  }, []);\n\n  const handleCardClick = (card) => {\n    setSelectedCard(card);\n  }\n  \n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(!isEditProfilePopupOpen);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(!isAddPlacePopupOpen);\n  }\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(!isEditAvatarPopupOpened);\n  }\n\n  function handleDeleteCardClick(card) {\n    setIsDeleteCardPopupOpened(card);\n  }\n\n  function handleUpdateUser(userData) {\n    api.editUserInfo(userData)\n      .then(data => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => console.log('#### Edit user failed ####', err));\n  }\n\n  function handleUpdateAvatar(avatarLink) {\n    api.changeAvatar(avatarLink) \n      .then(data => {\n        setCurrentUser(data);\n        closeAllPopups();\n      })\n      .catch(err => console.log('#### Avatar update falied ####', err));\n  }\n\n  function closeAllPopups() {\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsEditAvatarPopupOpen(false);\n    setIsDeleteCardPopupOpened(false);\n    setSelectedCard(false);\n  }  \n\n  function handleDeleteConfirm(card) {\n    api.deleteCard(card._id)\n      .then(() => {\n        setCards(state => {\n          return state.filter((c) => {\n            return c._id === card._id ? null : c;\n          })\n        });\n        closeAllPopups();\n      })\n      .catch(err => console.log('#### Delete card error ####', err));\n  }\n\n  function deleteCard() {\n    handleDeleteConfirm(isDeleteCardPopupOpened);\n  }\n\n  function handleCardLike(card) {\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n    api.handleCardLikeStatus(card._id, !isLiked)\n      .then((newCard) => {\n        setCards(state => {\n          return state.map((c) => {\n            return c._id === card._id ? newCard : c;\n          });\n        });\n      })\n      .catch(err => console.log('#### Handle Like Error ####', err));\n  }\n\n  function handleAddPlaceSubmit(card) {\n    api.addNewCard(card)\n      .then(newCard => {\n        setCards([newCard, ...cards]);\n        closeAllPopups();\n      })\n      .catch(err => console.log('#### Add card failed ####', err));\n  }\n  \n  return (\n    <CurrentUserContext.Provider value={ currentUser }>\n      \n      <div className=\"page\">\n\n        <Header />\n\n        <Main \n          cards={ cards }\n          loadingSpinner={ loadingSpinner }\n          onEditProfile={ handleEditProfileClick } \n          onAddPlace={ handleAddPlaceClick } \n          onEditAvatar={ handleEditAvatarClick } \n          onCardClick={ handleCardClick }\n          onCardLike={ handleCardLike }\n          onDeleteCardClick={ handleDeleteCardClick }      \n          setIsDeleteCardPopupOpened={ setIsDeleteCardPopupOpened }    \n        />\n\n        <Footer />\n\n      </div>\n\n      <ImagePopup \n        card={ selectedCard }\n        onClose={ closeAllPopups }\n      />\n\n      <EditProfilePopup \n        isOpen={ isEditProfilePopupOpen }\n        onClose={ closeAllPopups }\n        onUpdateUser={ handleUpdateUser }\n      />\n\n      <EditAvatarPopup\n        isOpen={ isEditAvatarPopupOpened }\n        onClose={ closeAllPopups }\n        onUpdateAvatar={ handleUpdateAvatar }\n      />\n\n      <AddPlacePopup \n        isOpen={ isAddPlacePopupOpen }\n        onClose={ closeAllPopups }\n        onAddPlace={ handleAddPlaceSubmit }\n      />\n\n      <ConfirmationPopup\n        isOpen={ isDeleteCardPopupOpened }\n        onClose={ closeAllPopups }\n        onDeleteCard={ deleteCard }\n      />\n\n    </CurrentUserContext.Provider>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}